#!/usr/bin/env bash

TMP_FILE=/tmp/aicommit-prompt.txt

echo -e "Generate a concise commit message summarizing this diff. Write only the commit message and nothing else. The diff follows: <diff>" > "$TMP_FILE"
git diff HEAD >> "$TMP_FILE"
echo "</diff>" >> "$TMP_FILE"

MESSAGE="$(ollama run llama3 < "$TMP_FILE")"

git commit -m "$MESSAGE"
